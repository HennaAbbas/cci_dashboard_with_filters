<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CircleCI Data Dashboard</title>
  <!-- Include Tailwind CSS via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- PapaParse for CSV parsing -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
  <!-- React and ReactDOM -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <!-- Babel for JSX -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.21.4/babel.min.js"></script>
  <!-- Lodash for data manipulation -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.21/lodash.min.js"></script>
</head>
<body class="bg-gray-50">
  <div class="container mx-auto p-4">
    <h1 class="text-2xl font-bold mb-6">CircleCI Build Data Dashboard</h1>
    <div id="app"></div>
  </div>
  
  <!-- Your React component (written in JSX, will be transformed by Babel) -->
  <script type="text/babel">
    const { useState, useEffect, useMemo, useRef } = React;

    // Main Dashboard Component
    const CircleCIDataDashboard = () => {
      const [data, setData] = useState([]);
      const [loading, setLoading] = useState(false);
      const [error, setError] = useState(null);
      const [filters, setFilters] = useState({});
      const [activeFilters, setActiveFilters] = useState({});
      const [currentPage, setCurrentPage] = useState(1);
      const [rowsPerPage, setRowsPerPage] = useState(10);
      const [sortConfig, setSortConfig] = useState({ key: null, direction: 'asc' });
      const [columnOptions, setColumnOptions] = useState({});
      const [visibleColumns, setVisibleColumns] = useState([]);
      const [searchTerm, setSearchTerm] = useState('');
      const [stats, setStats] = useState({});
      const [dataLoaded, setDataLoaded] = useState(false);
      const [selectedFilterCategory, setSelectedFilterCategory] = useState('common');
      const [expandedGroups, setExpandedGroups] = useState({});
      const filterPanelRef = useRef(null);

      // Define filter categories
      const filterCategories = {
        common: ['ORGANIZATION_NAME', 'PROJECT_NAME', 'VCS_NAME', 'VCS_BRANCH', 'JOB_BUILD_STATUS', 'OPERATING_SYSTEM', 'EXECUTOR'],
        organization: ['ORGANIZATION_ID', 'ORGANIZATION_NAME', 'ORGANIZATION_CREATED_DATE'],
        project: ['PROJECT_ID', 'PROJECT_NAME', 'PROJECT_CREATED_DATE'],
        vcs: ['VCS_NAME', 'VCS_URL', 'VCS_BRANCH'],
        pipeline: ['PIPELINE_ID', 'PIPELINE_CREATED_AT', 'PIPELINE_NUMBER', 'IS_UNREGISTERED_USER', 'PIPELINE_TRIGGER_SOURCE', 'PIPELINE_TRIGGER_USER_ID'],
        workflow: ['WORKFLOW_ID', 'WORKFLOW_NAME', 'WORKFLOW_FIRST_JOB_QUEUED_AT', 'WORKFLOW_FIRST_JOB_STARTED_AT', 'WORKFLOW_STOPPED_AT', 'IS_WORKFLOW_SUCCESSFUL'],
        job: ['JOB_NAME', 'JOB_RUN_NUMBER', 'JOB_ID', 'JOB_RUN_DATE', 'JOB_RUN_QUEUED_AT', 'JOB_RUN_STARTED_AT', 'JOB_RUN_STOPPED_AT', 'JOB_BUILD_STATUS', 'JOB_RUN_SECONDS'],
        resources: ['RESOURCE_CLASS', 'OPERATING_SYSTEM', 'EXECUTOR', 'PARALLELISM', 'MEDIAN_CPU_UTILIZATION_PCT', 'MAX_CPU_UTILIZATION_PCT', 'MEDIAN_RAM_UTILIZATION_PCT', 'MAX_RAM_UTILIZATION_PCT'],
        credits: ['COMPUTE_CREDITS', 'DLC_CREDITS', 'USER_CREDITS', 'STORAGE_CREDITS', 'NETWORK_CREDITS', 'LEASE_CREDITS', 'LEASE_OVERAGE_CREDITS', 'IPRANGES_CREDITS', 'TOTAL_CREDITS'],
        all: [
          'ORGANIZATION_ID', 'ORGANIZATION_NAME', 'ORGANIZATION_CREATED_DATE',
          'PROJECT_ID', 'PROJECT_NAME', 'PROJECT_CREATED_DATE',
          'LAST_BUILD_FINISHED_AT',
          'VCS_NAME', 'VCS_URL', 'VCS_BRANCH',
          'PIPELINE_ID', 'PIPELINE_CREATED_AT', 'PIPELINE_NUMBER', 'IS_UNREGISTERED_USER', 'PIPELINE_TRIGGER_SOURCE', 'PIPELINE_TRIGGER_USER_ID',
          'WORKFLOW_ID', 'WORKFLOW_NAME', 'WORKFLOW_FIRST_JOB_QUEUED_AT', 'WORKFLOW_FIRST_JOB_STARTED_AT', 'WORKFLOW_STOPPED_AT', 'IS_WORKFLOW_SUCCESSFUL',
          'JOB_NAME', 'JOB_RUN_NUMBER', 'JOB_ID', 'JOB_RUN_DATE', 'JOB_RUN_QUEUED_AT', 'JOB_RUN_STARTED_AT', 'JOB_RUN_STOPPED_AT', 'JOB_BUILD_STATUS',
          'RESOURCE_CLASS', 'OPERATING_SYSTEM', 'EXECUTOR', 'PARALLELISM',
          'JOB_RUN_SECONDS', 'MEDIAN_CPU_UTILIZATION_PCT', 'MAX_CPU_UTILIZATION_PCT', 'MEDIAN_RAM_UTILIZATION_PCT', 'MAX_RAM_UTILIZATION_PCT',
          'COMPUTE_CREDITS', 'DLC_CREDITS', 'USER_CREDITS', 'STORAGE_CREDITS', 'NETWORK_CREDITS', 'LEASE_CREDITS', 'LEASE_OVERAGE_CREDITS', 'IPRANGES_CREDITS', 'TOTAL_CREDITS'
        ]
      };

      // Get active filter columns based on selected category
      const getActiveFilterColumns = () => {
        return filterCategories[selectedFilterCategory] || [];
      };

      // Toggle expanded group
      const toggleExpandedGroup = (groupName) => {
        setExpandedGroups(prev => ({
          ...prev,
          [groupName]: !prev[groupName]
        }));
      };

      // Calculate statistics from the data
      const calculateStats = (data) => {
        const stats = {
          totalJobs: data.length,
          successfulJobs: data.filter(job => job.JOB_BUILD_STATUS === 'success').length,
          failedJobs: data.filter(job => job.JOB_BUILD_STATUS === 'failed').length,
          totalCredits: _.sumBy(data, 'TOTAL_CREDITS'),
          averageJobRuntime: _.meanBy(
            data.filter(job => job.JOB_RUN_SECONDS && job.JOB_RUN_SECONDS !== null), 
            'JOB_RUN_SECONDS'
          )
        };
        
        setStats(stats);
      };

      // Handle file upload
      const handleFileUpload = (event) => {
        const file = event.target.files[0];
        if (!file) return;
        
        setLoading(true);
        setError(null);
        
        const reader = new FileReader();
        reader.onload = (e) => {
          const csvText = e.target.result;
          
          Papa.parse(csvText, {
            header: true,
            dynamicTyping: true,
            skipEmptyLines: true,
            complete: (results) => {
              console.log("File parsed successfully. Rows:", results.data.length);
              
              if (results.data.length === 0 || !results.meta.fields || results.meta.fields.length === 0) {
                setError("CSV parsing produced no valid data or headers");
                setLoading(false);
                return;
              }
              
              // Clean up data - replace "\\N" with null for better display
              const cleanData = results.data.map(row => {
                const cleanRow = {};
                results.meta.fields.forEach(field => {
                  cleanRow[field] = row[field] === "\\\\N" ? null : row[field];
                });
                return cleanRow;
              });
              
              setData(cleanData);
              
              // Set visible columns (first 10 columns by default)
              setVisibleColumns(results.meta.fields.slice(0, 10));
              
              // Generate filter options for each column
              const options = {};
              results.meta.fields.forEach(field => {
                // Get unique values for this column (limit to 500 for performance)
                const uniqueValues = [...new Set(cleanData.map(item => item[field]))].filter(x => x !== null);
                // Sort values, but limit to 500 options to prevent UI overload
                options[field] = uniqueValues.slice(0, 500).sort();
              });
              setColumnOptions(options);
              
              // Calculate basic stats
              calculateStats(cleanData);
              
              setLoading(false);
              setDataLoaded(true);
            },
            error: (error) => {
              console.error("CSV parsing error:", error);
              setError(`Error parsing CSV: ${error.message}`);
              setLoading(false);
            }
          });
        };
        
        reader.onerror = () => {
          setError("Error reading file");
          setLoading(false);
        };
        
        reader.readAsText(file);
      };

      // Filter data based on active filters
      const filteredData = useMemo(() => {
        if (Object.keys(activeFilters).length === 0 && !searchTerm) {
          return data;
        }

        return data.filter(item => {
          // Check if the item matches all active filters
          const matchesFilters = Object.entries(activeFilters).every(([field, value]) => {
            if (!value || value.length === 0) return true;
            return value.includes(item[field]);
          });
          
          // Check global search term
          const matchesSearch = !searchTerm || Object.values(item).some(val => {
            if (val === null) return false;
            return String(val).toLowerCase().includes(searchTerm.toLowerCase());
          });
          
          return matchesFilters && matchesSearch;
        });
      }, [data, activeFilters, searchTerm]);

      // Sort data
      const sortedData = useMemo(() => {
        if (!sortConfig.key) return filteredData;
        
        return [...filteredData].sort((a, b) => {
          const aValue = a[sortConfig.key];
          const bValue = b[sortConfig.key];
          
          // Handle null values in sorting
          if (aValue === null && bValue === null) return 0;
          if (aValue === null) return sortConfig.direction === 'asc' ? 1 : -1;
          if (bValue === null) return sortConfig.direction === 'asc' ? -1 : 1;
          
          // Compare based on data type
          if (typeof aValue === 'number' && typeof bValue === 'number') {
            return sortConfig.direction === 'asc' ? aValue - bValue : bValue - aValue;
          }
          
          // String comparison
          const aString = String(aValue).toLowerCase();
          const bString = String(bValue).toLowerCase();
          
          if (sortConfig.direction === 'asc') {
            return aString.localeCompare(bString);
          } else {
            return bString.localeCompare(aString);
          }
        });
      }, [filteredData, sortConfig]);

      // Pagination
      const paginatedData = useMemo(() => {
        const startIndex = (currentPage - 1) * rowsPerPage;
        return sortedData.slice(startIndex, startIndex + rowsPerPage);
      }, [sortedData, currentPage, rowsPerPage]);

      // Handle sorting
      const requestSort = (key) => {
        let direction = 'asc';
        if (sortConfig.key === key && sortConfig.direction === 'asc') {
          direction = 'desc';
        }
        setSortConfig({ key, direction });
      };

      // Handle filter changes
      const handleFilterChange = (field, value) => {
        setFilters({
          ...filters,
          [field]: value ? [value] : []
        });
      };

      // Apply filters
      const applyFilters = () => {
        setActiveFilters(filters);
        setCurrentPage(1); // Reset to first page when filters change
        
        // Close filter panel when filters are applied
        if (filterPanelRef.current) {
          filterPanelRef.current.classList.add('hidden');
        }
      };

      // Reset filters
      const resetFilters = () => {
        setFilters({});
        setActiveFilters({});
        setSearchTerm('');
        setCurrentPage(1);
      };

      // Export filtered data to CSV
      const exportToCSV = () => {
        if (sortedData.length === 0) return;
        
        const csv = Papa.unparse(sortedData);
        const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
        const url = URL.createObjectURL(blob);
        const link = document.createElement('a');
        link.href = url;
        link.setAttribute('download', 'circleci_filtered_data.csv');
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
      };

      // Toggle column visibility
      const toggleColumnVisibility = (column) => {
        if (visibleColumns.includes(column)) {
          setVisibleColumns(visibleColumns.filter(col => col !== column));
        } else {
          setVisibleColumns([...visibleColumns, column]);
        }
      };

      // Calculate total pages
      const totalPages = Math.ceil(sortedData.length / rowsPerPage);

      // Format value for display
      const formatValue = (value, column) => {
        if (value === null || value === undefined) return "—";
        
        // Format dates
        if (column.includes('DATE') || column.includes('_AT')) {
          if (typeof value === 'string' && value.includes('-')) {
            return value;
          }
        }
        
        // Format boolean values
        if (typeof value === 'boolean') {
          return value ? "Yes" : "No";
        }
        
        // Format credits and numbers
        if (column.includes('CREDITS') && typeof value === 'number') {
          return value.toFixed(2);
        }
        
        if (column.includes('PCT') && typeof value === 'number') {
          return `${value.toFixed(1)}%`;
        }
        
        return String(value);
      };

      // Group columns into logical categories
      const columnGroups = {
        "Organization": ["ORGANIZATION_ID", "ORGANIZATION_NAME", "ORGANIZATION_CREATED_DATE"],
        "Project": ["PROJECT_ID", "PROJECT_NAME", "PROJECT_CREATED_DATE"],
        "VCS": ["VCS_NAME", "VCS_URL", "VCS_BRANCH", "LAST_BUILD_FINISHED_AT"],
        "Pipeline": ["PIPELINE_ID", "PIPELINE_CREATED_AT", "PIPELINE_NUMBER", "IS_UNREGISTERED_USER", "PIPELINE_TRIGGER_SOURCE", "PIPELINE_TRIGGER_USER_ID"],
        "Workflow": ["WORKFLOW_ID", "WORKFLOW_NAME", "WORKFLOW_FIRST_JOB_QUEUED_AT", "WORKFLOW_FIRST_JOB_STARTED_AT", "WORKFLOW_STOPPED_AT", "IS_WORKFLOW_SUCCESSFUL"],
        "Job": ["JOB_NAME", "JOB_RUN_NUMBER", "JOB_ID", "JOB_RUN_DATE", "JOB_RUN_QUEUED_AT", "JOB_RUN_STARTED_AT", "JOB_RUN_STOPPED_AT", "JOB_BUILD_STATUS"],
        "Resources": ["RESOURCE_CLASS", "OPERATING_SYSTEM", "EXECUTOR", "PARALLELISM", "JOB_RUN_SECONDS", "MEDIAN_CPU_UTILIZATION_PCT", "MAX_CPU_UTILIZATION_PCT", "MEDIAN_RAM_UTILIZATION_PCT", "MAX_RAM_UTILIZATION_PCT"],
        "Credits": ["COMPUTE_CREDITS", "DLC_CREDITS", "USER_CREDITS", "STORAGE_CREDITS", "NETWORK_CREDITS", "LEASE_CREDITS", "LEASE_OVERAGE_CREDITS", "IPRANGES_CREDITS", "TOTAL_CREDITS"]
      };

      // Show loading state
      if (loading) {
        return (
          <div className="flex items-center justify-center h-64">
            <div className="text-center">
              <div className="w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto"></div>
              <p className="mt-4 text-lg">Loading data...</p>
            </div>
          </div>
        );
      }

      // Show file upload prompt if data not loaded
      if (!dataLoaded) {
        return (
          <div className="flex flex-col items-center justify-center space-y-6 p-8 border-2 border-dashed border-gray-300 rounded-lg bg-white">
            <div className="text-center">
              <svg xmlns="http://www.w3.org/2000/svg" className="h-12 w-12 mx-auto text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
              </svg>
              <h2 className="mt-2 text-xl font-semibold text-gray-900">Upload your CircleCI data</h2>
              <p className="mt-1 text-sm text-gray-500">Upload a CSV file to visualize and analyze your data</p>
            </div>
            
            <input
              type="file"
              accept=".csv"
              onChange={handleFileUpload}
              className="block w-full max-w-xs text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"
            />
            
            {error && (
              <div className="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mt-4 w-full max-w-lg">
                <strong className="font-bold">Error!</strong>
                <span className="block sm:inline"> {error}</span>
              </div>
            )}
          </div>
        );
      }

      return (
        <div className="flex flex-col space-y-6">
          {/* File upload at the top */}
          <div className="bg-blue-50 p-4 rounded border border-blue-200">
            <div className="flex flex-col md:flex-row items-center">
              <div className="flex-shrink-0 mr-4">
                <h3 className="font-medium">CSV Data Source:</h3>
              </div>
              <div className="flex-grow">
                <input
                  type="file"
                  accept=".csv"
                  onChange={handleFileUpload}
                  className="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"
                />
              </div>
              <div className="flex-shrink-0 mt-2 md:mt-0 md:ml-2">
                <button
                  onClick={exportToCSV}
                  className="px-3 py-2 bg-green-600 text-white rounded shadow hover:bg-green-700"
                  disabled={sortedData.length === 0}
                >
                  Export Filtered Data
                </button>
              </div>
            </div>
          </div>
          
          {/* Stats Summary */}
          <div className="grid grid-cols-1 md:grid-cols-4 gap-4">
            <div className="bg-white p-4 rounded shadow">
              <h3 className="text-sm font-medium text-gray-500">Total Jobs</h3>
              <p className="text-2xl font-bold">{stats.totalJobs?.toLocaleString() || 0}</p>
            </div>
            <div className="bg-white p-4 rounded shadow">
              <h3 className="text-sm font-medium text-gray-500">Success Rate</h3>
              <p className="text-2xl font-bold">
                {stats.totalJobs ? ((stats.successfulJobs / stats.totalJobs) * 100).toFixed(1) : 0}%
              </p>
            </div>
            <div className="bg-white p-4 rounded shadow">
              <h3 className="text-sm font-medium text-gray-500">Total Credits</h3>
              <p className="text-2xl font-bold">{stats.totalCredits?.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2}) || 0}</p>
            </div>
            <div className="bg-white p-4 rounded shadow">
              <h3 className="text-sm font-medium text-gray-500">Avg. Runtime (sec)</h3>
              <p className="text-2xl font-bold">{stats.averageJobRuntime?.toFixed(1) || 'N/A'}</p>
            </div>
          </div>
          
          {/* Active Filters Display */}
          {Object.keys(activeFilters).length > 0 && (
            <div className="bg-gray-50 p-4 rounded border">
              <div className="flex justify-between items-center mb-2">
                <h3 className="font-medium">Active Filters:</h3>
                <button 
                  onClick={resetFilters}
                  className="text-sm text-red-600 hover:text-red-800"
                >
                  Clear All
                </button>
              </div>
              <div className="flex flex-wrap gap-2">
                {Object.entries(activeFilters).map(([field, values]) => 
                  values && values.length > 0 ? (
                    <div key={field} className="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded flex items-center">
                      <span className="font-medium mr-1">{field}:</span>
                      <span>{values.join(', ')}</span>
                      <button
                        className="ml-1 text-blue-600 hover:text-blue-800 font-bold"
                        onClick={() => {
                          const newFilters = {...filters};
                          delete newFilters[field];
                          setFilters(newFilters);
                          const newActiveFilters = {...activeFilters};
                          delete newActiveFilters[field];
                          setActiveFilters(newActiveFilters);
                        }}
                      >
                        ×
                      </button>
                    </div>
                  ) : null
                )}
              </div>
            </div>
          )}
          
          {/* Search and Controls */}
          <div className="flex flex-col md:flex-row gap-4 items-center">
            <div className="flex-1">
              <input
                type="text"
                placeholder="Search all columns..."
                className="w-full p-2 border rounded"
                value={searchTerm}
                onChange={(e) => {
                  setSearchTerm(e.target.value);
                  setCurrentPage(1);
                }}
              />
            </div>
            
            <div className="flex gap-2">
              <select 
                className="p-2 border rounded"
                value={rowsPerPage}
                onChange={(e) => {
                  setRowsPerPage(Number(e.target.value));
                  setCurrentPage(1);
                }}
              >
                <option value={10}>10 rows</option>
                <option value={20}>20 rows</option>
                <option value={50}>50 rows</option>
                <option value={100}>100 rows</option>
              </select>
              
              <div className="relative">
                <button 
                  className="p-2 border rounded bg-white"
                  onClick={() => document.getElementById('column-selector').classList.toggle('hidden')}
                >
                  Columns
                </button>
                <div 
                  id="column-selector" 
                  className="absolute right-0 mt-1 w-64 bg-white border rounded shadow-lg p-2 z-10 hidden max-h-96 overflow-y-auto"
                >
                  {Object.entries(columnGroups).map(([groupName, columns]) => (
                    <div key={groupName} className="mb-2">
                      <div 
                        className="flex items-center p-1 bg-gray-100 cursor-pointer" 
                        onClick={() => toggleExpandedGroup(groupName)}
                      >
                        <span className="mr-1">{expandedGroups[groupName] ? '▼' : '►'}</span>
                        <span className="font-medium">{groupName}</span>
                      </div>
                      
                      {expandedGroups[groupName] && columns.map(column => 
                        data.length > 0 && Object.keys(data[0]).includes(column) && (
                          <div key={column} className="flex items-center p-1 pl-6">
                            <input
                              type="checkbox"
                              id={`col-${column}`}
                              checked={visibleColumns.includes(column)}
                              onChange={() => toggleColumnVisibility(column)}
                              className="mr-2"
                            />
                            <label htmlFor={`col-${column}`} className="text-sm">{column}</label>
                          </div>
                        )
                      )}
                    </div>
                  ))}
                </div>
              </div>
              
              <button 
                className="p-2 border rounded bg-blue-500 text-white"
                onClick={() => filterPanelRef.current.classList.toggle('hidden')}
              >
                Filters
              </button>
            </div>
          </div>
          
          {/* Filter Panel */}
          <div id="filter-panel" ref={filterPanelRef} className="bg-gray-100 p-4 rounded shadow hidden">
            <div className="mb-4">
              <div className="flex overflow-x-auto space-x-2 pb-2">
                <button
                  className={`px-3 py-1 rounded ${selectedFilterCategory === 'common' ? 'bg-blue-500 text-white' : 'bg-gray-200'}`}
                  onClick={() => setSelectedFilterCategory('common')}
                >
                  Common
                </button>
                <button
                  className={`px-3 py-1 rounded ${selectedFilterCategory === 'organization' ? 'bg-blue-500 text-white' : 'bg-gray-200'}`}
                  onClick={() => setSelectedFilterCategory('organization')}
                >
                  Organization
                </button>
                <button
                  className={`px-3 py-1 rounded ${selectedFilterCategory === 'project' ? 'bg-blue-500 text-white' : 'bg-gray-200'}`}
                  onClick={() => setSelectedFilterCategory('project')}
                >
                  Project
                </button>
                <button
                  className={`px-3 py-1 rounded ${selectedFilterCategory === 'vcs' ? 'bg-blue-500 text-white' : 'bg-gray-200'}`}
                  onClick={() => setSelectedFilterCategory('vcs')}
                >
                  VCS
                </button>
                <button
                  className={`px-3 py-1 rounded ${selectedFilterCategory === 'pipeline' ? 'bg-blue-500 text-white' : 'bg-gray-200'}`}
                  onClick={() => setSelectedFilterCategory('pipeline')}
                >
                  Pipeline
                </button>
                <button
                  className={`px-3 py-1 rounded ${selectedFilterCategory === 'workflow' ? 'bg-blue-500 text-white' : 'bg-gray-200'}`}
                  onClick={() => setSelectedFilterCategory('workflow')}
                >
                  Workflow
                </button>
                <button
                  className={`px-3 py-1 rounded ${selectedFilterCategory === 'job' ? 'bg-blue-500 text-white' : 'bg-gray-200'}`}
                  onClick={() => setSelectedFilterCategory('job')}
                >
                  Job
                </button>
                <button
                  className={`px-3 py-1 rounded ${selectedFilterCategory === 'resources' ? 'bg-blue-500 text-white' : 'bg-gray-200'}`}
                  onClick={() => setSelectedFilterCategory('resources')}
                >
                  Resources
                </button>
                <button
                  className={`px-3 py-1 rounded ${selectedFilterCategory === 'credits' ? 'bg-blue-500 text-white' : 'bg-gray-200'}`}
                  onClick={() => setSelectedFilterCategory('credits')}
                >
                  Credits
                </button>
                <button
                  className={`px-3 py-1 rounded ${selectedFilterCategory === 'all' ? 'bg-blue-500 text-white' : 'bg-gray-200'}`}
                  onClick={() => setSelectedFilterCategory('all')}
                >
                  All
                </button
